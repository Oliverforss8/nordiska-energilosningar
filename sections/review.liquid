<section class="py-[60px] md:py-[85px]">
  <div class="layout">
    <div class="text-center">
      {% if section.settings.heading != blank %}
        <h2 class="headline1 mb-[50px] text-[#171717]">
          {{ section.settings.heading }}
        </h2>
      {% endif %}

      <div class="mb-[50px] grid grid-cols-1 gap-[30px] md:grid-cols-3">
        {% for block in section.blocks %}
          <div
            class="flex  flex-col justify-between rounded-[15px] bg-[#F3F1E8] p-[30px]"
            {{ block.shopify_attributes }}
          >
            <!-- Stars -->
            <div class="mb-[20px] flex  items-center justify-center  gap-[5px]">
              {% for i in (1..5) %}
                {% if i <= block.settings.stars %}
                  <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <path d='M10 0L12.2451 7.75593H20L13.8775 12.4881L16.1226 20.2441L10 15.5119L3.87744 20.2441L6.12256 12.4881L0 7.75593H7.75493L10 0Z' fill='#E9A600'/>
                  </svg>
                {% else %}
                  <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <path d='M10 0L12.2451 7.75593H20L13.8775 12.4881L16.1226 20.2441L10 15.5119L3.87744 20.2441L6.12256 12.4881L0 7.75593H7.75493L10 0Z' fill='#E9A600'/>
                  </svg>
                {% endif %}
              {% endfor %}
            </div>

            <!-- Review text -->
            {% if block.settings.review_text != blank %}
              <div class="text mb-[20px] flex-grow text-[#171717]/80">
                "{{ block.settings.review_text }}"
              </div>
            {% endif %}

            <!-- Name -->
            {% if block.settings.customer_name != blank %}
              <div class="body1 text-[16px] text-[#171717]">
                - {{ block.settings.customer_name }}
              </div>
            {% endif %}
          </div>
        {% endfor %}
      </div>

      <!-- Button -->
      {% comment %}
        <div class='flex justify-center'>
          <button class='px-[30px] py-[17px] rounded-[10px] knappetikett text-[#171717] bg-[#EBCF2F] hover:bg-[#D4B82A] transition-colors'>
            {{ section.settings.button_text | default: "Läs alla recensioner" }}
          </button>
        </div>
      {% endcomment %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Reviews",
  "tag": "section",
  "class": "review-section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Vad våra kunder säger"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text",
      "default": "Läs alla recensioner"
    },
    {
      "type": "url",
      "id": "button_url",
      "label": "Button URL"
    }
  ],
  "blocks": [
    {
      "type": "review",
      "name": "Review",
      "settings": [
        {
          "type": "range",
          "id": "stars",
          "label": "Number of stars",
          "min": 1,
          "max": 5,
          "default": 5
        },
        {
          "type": "textarea",
          "id": "review_text",
          "label": "Review text",
          "default": "Fantastisk service och mycket professionell hantering av vårt projekt."
        },
        {
          "type": "text",
          "id": "customer_name",
          "label": "Customer name",
          "default": "Anna Andersson"
        }
      ]
    }
  ],
  "max_blocks": 3,
  "presets": [
    {
      "name": "Reviews",
      "blocks": [
        {
          "type": "review",
          "settings": {
            "stars": 5,
            "review_text": "Fantastisk service och mycket professionell hantering av vårt projekt.",
            "customer_name": "Anna Andersson"
          }
        },
        {
          "type": "review",
          "settings": {
            "stars": 5,
            "review_text": "Rekommenderar varmt! Snabb installation och bra priser.",
            "customer_name": "Erik Johansson"
          }
        },
        {
          "type": "review",
          "settings": {
            "stars": 4,
            "review_text": "Mycket nöjd med resultatet. Kommer definitivt använda er igen.",
            "customer_name": "Maria Svensson"
          }
        }
      ]
    }
  ]
}
{% endschema %}
