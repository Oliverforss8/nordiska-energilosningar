{% liquid
  assign section_id = section.settings.custom_id | default: section.id
  assign section_class = 'section-bild-och-text'
%}

<section
  id="{{ section_id }}"
  class="{{ section_class }}   py-[60px] md:py-[85px]"
  style="background-color: {{ section.settings.background_color }};"
>
  <div class="layout flex flex-col items-center justify-between gap-[40px] md:gap-[50px] {% if section.settings.image_position == 'left' %}md:flex-row-reverse{% else %}md:flex-row{% endif %}">
    <div class="flex flex-col">
      {% if section.settings.title != blank %}
        <div class="headline1 text-[#171717]">{{ section.settings.title }}</div>
      {% endif %}

      {% if section.settings.text != blank %}
        <div class="text pt-[40px] text-[#171717]/80 md:pt-[50px]">
          {{ section.settings.text }}
        </div>
      {% endif %}
    </div>

    <div class="relative h-[350px] w-full  md:h-[450px] md:w-[2500px] lg:w-[450px] lg:shrink-0">
      {% if section.settings.media_type == 'video' and section.settings.video != blank %}
        <!-- Video -->
        <video
          class="h-full w-full rounded-[15px] object-cover"
          width="450"
          height="450"
          autoplay
          muted
          loop
          playsinline
        >
          <source
            src="{{ section.settings.video.sources[1].url }}"
            type="video/mp4"
          >
          <source
            src="{{ section.settings.video.sources[0].url }}"
            type="video/webm"
          >
        </video>

        {% if section.settings.overlay_opacity > 0 %}
          <div
            class="absolute inset-0 rounded-[15px] bg-black"
            style="opacity: {{ section.settings.overlay_opacity | divided_by: 100.0 }};"
          ></div>
        {% endif %}

        {% if section.settings.image_button_text != blank
          and section.settings.image_button_link != blank
        %}
          <div class="absolute bottom-[20px] left-[20px] z-10 md:bottom-[30px] md:left-[30px]">
            <a
              href="{{ section.settings.image_button_link }}"
              class="knappetikett flex shrink-0 flex-row items-center gap-[20px] rounded-full px-[20px] py-[17px] text-[#171717]"
              style="background: linear-gradient(135deg, #FFA94D 0%, #FF4E33 100%);"
            >
              {{ section.settings.image_button_text }}
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="22"
                height="18"
                viewBox="0 0 22 18"
                fill="none"
              >
                <path d="M1 8.99991H21L13.1739 1.17383" stroke="#171717" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M1 9.00009H21L13.1739 16.8262" stroke="#171717" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </a>
          </div>
        {% endif %}
      {% elsif section.settings.media_type == 'image' and section.settings.image != blank %}
        <!-- Image -->
        <img
          src="{{ section.settings.image | image_url: width: 900 }}"
          alt="{{ section.settings.image.alt | default: section.settings.title }}"
          class="h-full w-full rounded-[15px] object-cover"
          width="450"
          height="450"
          loading="lazy"
        >

        {% if section.settings.overlay_opacity > 0 %}
          <div
            class="absolute inset-0 rounded-[15px] bg-black"
            style="opacity: {{ section.settings.overlay_opacity | divided_by: 100.0 }};"
          ></div>
        {% endif %}

        {% if section.settings.image_button_text != blank
          and section.settings.image_button_link != blank
        %}
          <div class="absolute bottom-[20px] left-[20px] z-10 md:bottom-[30px] md:left-[30px]">
            <a
              href="{{ section.settings.image_button_link }}"
              class="knappetikett flex shrink-0 flex-row items-center gap-[20px] rounded-full px-[20px] py-[17px] text-[#171717]"
              style="background: linear-gradient(135deg, #FFA94D 0%, #FF4E33 100%);"
            >
              {{ section.settings.image_button_text }}
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="22"
                height="18"
                viewBox="0 0 22 18"
                fill="none"
              >
                <path d="M1 8.99991H21L13.1739 1.17383" stroke="#171717" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M1 9.00009H21L13.1739 16.8262" stroke="#171717" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </a>
          </div>
        {% endif %}
      {% else %}
        <div class="flex h-full w-full items-center justify-center rounded-[10px] bg-gray-200 text-gray-500">
          {% if section.settings.media_type == 'video' %}
            Välj en video
          {% else %}
            Välj en bild
          {% endif %}
        </div>
      {% endif %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Bild och text",
  "tag": "section",
  "class": "section-bild-och-text",
  "settings": [
    {
      "type": "select",
      "id": "background_color",
      "label": "Background color",
      "options": [
        {
          "value": "#ffffff",
          "label": "White"
        },
        {
          "value": "#f7f7f7",
          "label": "Gray"
        }
      ],
      "default": "#ffffff"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Titel",
      "default": "Titel"
    },
    {
      "type": "richtext",
      "id": "text",
      "label": "Text",
      "default": "<p>Text</p>"
    },
    {
      "type": "select",
      "id": "media_type",
      "label": "Mediatyp",
      "options": [
        {
          "value": "image",
          "label": "Bild"
        },
        {
          "value": "video",
          "label": "Video"
        }
      ],
      "default": "image"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Bild"
    },
    {
      "type": "video",
      "id": "video",
      "label": "Video (autoplay, muted, loop)"
    },
    {
      "type": "select",
      "id": "image_position",
      "label": "Mediaposition",
      "options": [
        {
          "value": "right",
          "label": "Höger"
        },
        {
          "value": "left",
          "label": "Vänster"
        }
      ],
      "default": "right"
    },
    {
      "type": "range",
      "id": "overlay_opacity",
      "label": "Overlay opacity",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "%",
      "default": 0,
      "info": "Add a black overlay on the image/video (0% = no overlay, 100% = fully black)"
    },
    {
      "type": "text",
      "id": "image_button_text",
      "label": "Knapptext"
    },
    {
      "type": "url",
      "id": "image_button_link",
      "label": "Knapplänk"
    },
    {
      "type": "text",
      "id": "custom_id",
      "label": "Anpassat ID",
      "info": "Lämna tomt för att använda standard ID"
    }
  ],
  "presets": [
    {
      "name": "Bild och text"
    }
  ]
}
{% endschema %}
