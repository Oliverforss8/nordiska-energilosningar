{% liquid
  assign section_id = section.settings.custom_id | default: section.id
  assign section_class = 'section-hero'
%}

<section
  class="relative flex h-full min-h-screen w-full flex-col overflow-visible"
>
  <div class="relative flex h-full min-h-screen w-full overflow-hidden">
    {% if section.settings.media_type == 'video' and section.settings.background_video != blank %}
      <!-- Background Video -->
      <video
        class="absolute inset-0 h-full w-full object-cover object-top"
        autoplay
        muted
        loop
        playsinline
      >
        <source
          src="{{ section.settings.background_video.sources[1].url }}"
          type="video/mp4"
        >
        <source
          src="{{ section.settings.background_video.sources[0].url }}"
          type="video/webm"
        >
      </video>
    {% elsif section.settings.media_type == 'image'
      and section.settings.background_image != blank
    %}
      <!-- Background Image -->
      {% render 'image',
        image: section.settings.background_image,
        class: 'w-full h-full object-cover object-top  absolute inset-0',
        loading: 'lazy'
      %}
    {% endif %}

    {% if section.settings.overlay_opacity > 0 %}
      <div
        class="absolute inset-0 h-full"
        style="background: linear-gradient(0deg, rgba(0, 0, 0, {{ section.settings.overlay_opacity | divided_by: 100.0 }}) 0%, rgba(0, 0, 0, {{ section.settings.overlay_opacity | divided_by: 100.0 }}) 100%"
      ></div>
    {% endif %}

    {% if section.settings.heading != blank %}
      <div class="layout absolute  inset-0 h-full">
        <div class="flex h-full flex-col items-start justify-end pb-[110px] md:pb-[120px]">
          <h1 class="headline1 pb-[20px] text-white md:pb-[40px]">
            {{ section.settings.heading | newline_to_br }}
          </h1>
          <div class="flex flex-col gap-[20px] md:flex-row md:items-center md:gap-[40px]">
            <div class=" md:shrink-0">
              {% if section.settings.button_url != blank %}
                <button class="bg-transparent">
                  <a
                    href="{{ section.settings.button_url }}"
                    class="knappetikett flex shrink-0 flex-row items-center gap-[20px] rounded-[10px] px-[20px] py-[17px]   text-[#171717]"
                    style="background: linear-gradient(0deg, rgba(255, 255, 255, 0.20) 0%, rgba(255, 255, 255, 0.20) 100%), #EBCF2F;"
                  >
                    {{ section.settings.button_text | default: 'Våra energilösningar' }}
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="22"
                      height="18"
                      viewBox="0 0 22 18"
                      fill="none"
                    >
                      <path d="M1 8.99991H21L13.1739 1.17383" stroke="#171717" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M1 9.00009H21L13.1739 16.8262" stroke="#171717" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                  </a>
                </button>
              {% else %}
                <div>
                  <button
                    class="knappetikett flex shrink-0 flex-row items-center gap-[20px] rounded-[10px] px-[20px] py-[17px]  text-[#171717]"
                    style="background: linear-gradient(0deg, rgba(255, 255, 255, 0.20) 0%, rgba(255, 255, 255, 0.20) 100%), #EBCF2F;"
                  >
                    {{ section.settings.button_text | default: 'Våra energilösningar' }}
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="22"
                      height="18"
                      viewBox="0 0 22 18"
                      fill="none"
                    >
                      <path d="M1 8.99991H21L13.1739 1.17383" stroke="#171717" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M1 9.00009H21L13.1739 16.8262" stroke="#171717" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                  </button>
                </div>
              {% endif %}
            </div>
            <p class="body1 w-full text-white sm:w-[70%] lg:w-[90%]">
              {{ section.settings.subheading | newline_to_br }}
            </p>
          </div>
        </div>
      </div>
    {% endif %}
  </div>
</section>

{% stylesheet %}
  .section-hero .image {
    position: absolute;
    width: 100%;
    height: 100%;
    inset: 0;
  }

  .section-hero .image > img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Hero",
  "tag": "section",
  "class": "section-hero",
  "blocks": [{ "type": "@theme" }, { "type": "@app" }],
  "settings": [
    {
      "type": "select",
      "id": "media_type",
      "label": "Bakgrundstyp",
      "options": [
        {
          "value": "image",
          "label": "Bild"
        },
        {
          "value": "video",
          "label": "Video"
        }
      ],
      "default": "image"
    },
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "Bakgrundsbild"
    },
    {
      "type": "video",
      "id": "background_video",
      "label": "Bakgrundsvideo (autoplay, muted, loop)"
    },
    {
      "type": "range",
      "id": "overlay_opacity",
      "label": "Mörk overlay opacitet",
      "min": 0,
      "max": 80,
      "step": 5,
      "unit": "%",
      "default": 20,
      "info": "Lägg till en mörk overlay över bakgrunden för bättre läsbarhet"
    },
    {
      "type": "textarea",
      "id": "heading",
      "label": "Rubrik",
      "default": "Välkommen till vår webbplats"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Beskrivning",
      "default": "Upptäck fantastiska produkter och tjänster"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Knapptext",
      "default": "Våra energilösningar"
    },
    {
      "type": "url",
      "id": "button_url",
      "label": "Knapplänk"
    }
  ],
  "presets": [
    {
      "name": "Hero"
    }
  ]
}
{% endschema %}
