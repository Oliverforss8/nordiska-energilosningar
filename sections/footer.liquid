{% comment %}
  sections/footer.liquid
{% endcomment %}

{% liquid
  # Check if we're on a company/foretag page
  assign is_foretag_page = false
  if page.handle contains 'foretag' or template.name contains 'foretag' or request.page_type contains 'foretag'
    assign is_foretag_page = true
  endif
%}

<footer
  class="mt-[62px] w-full rounded-t-[25px] md:mt-[87px] {% if is_foretag_page %}bg-[#171717]{% else %}bg-[#F3F1E8]{% endif %}"
>
  <div class="layout w-full py-[40px] pb-[30px] md:py-[80px] md:pb-[50px]">
    <div class="grid w-full grid-cols-1 gap-[30px] md:grid-cols-4 md:gap-[40px]">
      {% for block in section.blocks %}
        {% case block.type %}
          {% when 'link_column' %}
            <div
              class="flex flex-col gap-[20px]"
              {{ block.shopify_attributes }}
            >
              {% if block.settings.heading != blank %}
                <div
                  class="headline1 text-[24px] md:text-[40px] {% if is_foretag_page %}text-white{% else %}text-[#171717]{% endif %}"
                >
                  {{ block.settings.heading }}
                </div>
              {% endif %}

              <div class="flex flex-col gap-[20px] pt-[30px] md:gap-[30px] md:pt-[50px]">
                {% for i in (1..3) %}
                  {% assign link_text = 'link_' | append: i | append: '_text' %}
                  {% assign link_url = 'link_' | append: i | append: '_url' %}
                  {% if block.settings[link_text] != blank and block.settings[link_url] != blank %}
                    <a
                      href="{{ block.settings[link_url] }}"
                      class="flex flex-row items-center gap-[20px] no-underline"
                    >
                      <div class="flex items-center justify-center">
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="23"
                          height="18"
                          viewBox="0 0 23 18"
                          fill="none"
                        >
                          <path d="M1.33337 8.82609H21.3334M21.3334 8.82609L13.5073 1M21.3334 8.82609L13.5073 16.6522" stroke="{% if is_foretag_page %}#ffffff{% else %}#171717{% endif %}" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                      </div>
                      <div
                        class="body1 text-[16px] md:text-[20px] {% if is_foretag_page %}text-white{% else %}text-[#171717]{% endif %}"
                      >
                        {{ block.settings[link_text] }}
                      </div>
                    </a>
                  {% endif %}
                {% endfor %}
              </div>
            </div>
        {% endcase %}
      {% endfor %}
    </div>
    <div
      class=" my-[30px] h-[1px] w-full md:my-[50px] {% if is_foretag_page %}bg-white{% else %}bg-[#171717]{% endif %}"
    ></div>
    <div class="grid w-full grid-cols-1 gap-[30px] md:grid-cols-4 md:gap-[40px]">
      {% for block in section.blocks %}
        {% case block.type %}
          {% when 'bottom_link_column' %}
            <div
              class="col-span-1 flex flex-col md:col-span-2"
              {{ block.shopify_attributes }}
            >
              {% if block.settings.heading != blank %}
                <div
                  class="headline1 text-[24px] md:text-[40px] {% if is_foretag_page %}text-white{% else %}text-[#171717]{% endif %}"
                >
                  {{ block.settings.heading }}
                </div>
              {% endif %}
              <div class=" grid grid-cols-1 gap-[15px] pt-[30px] md:grid-cols-2 md:gap-[20px] md:pt-[50px] ">
                {% for i in (1..4) %}
                  {% assign link_text = 'link_' | append: i | append: '_text' %}
                  {% assign link_url = 'link_' | append: i | append: '_url' %}
                  {% if block.settings[link_text] != blank and block.settings[link_url] != blank %}
                    <div>
                      <a
                        href="{{ block.settings[link_url] }}"
                        class="flex flex-row items-center gap-[20px] no-underline"
                      >
                        <div class="flex items-center justify-center">
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="23"
                            height="18"
                            viewBox="0 0 23 18"
                            fill="none"
                          >
                            <path d="M1.33337 8.82609H21.3334M21.3334 8.82609L13.5073 1M21.3334 8.82609L13.5073 16.6522" stroke="{% if is_foretag_page %}#ffffff{% else %}#171717{% endif %}" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                          </svg>
                        </div>
                        <div
                          class="body1 text-[16px] md:text-[20px] {% if is_foretag_page %}text-white{% else %}text-[#171717]{% endif %}"
                        >
                          {{ block.settings[link_text] }}
                        </div>
                      </a>
                    </div>
                  {% endif %}
                {% endfor %}
              </div>
            </div>
        {% endcase %}
      {% endfor %}
    </div>
    <div class=" flex flex-col items-center justify-center gap-[20px] pt-[40px] md:flex-row md:justify-between md:gap-0 md:pt-[60px]">
      <div>
        <img
          src="{% if is_foretag_page %}{{ 'logga-vit.svg' | asset_url }}{% else %}{{ 'logga.svg' | asset_url }}{% endif %}"
          alt="Logo"
          width="auto"
          height="40"
          class="h-[40px] w-auto md:h-[53px]"
        >
      </div>
      <div class="footer-org-info headline1 text-center text-[14px] md:text-left md:text-[24px] {% if is_foretag_page %}text-white{% else %}text-[#171717]{% endif %}">
        Nordiska Energilösningar Sverige AB I <span class="no-phone-link">559510&#8209;6690</span>
      </div>
    </div>
  </div>
</footer>

{% stylesheet %}
  /* Prevent Safari from turning numbers into blue links - AGGRESSIVE */
  footer a[href^='tel:'],
  footer a[href^='mailto:'],
  footer a[x-apple-data-detectors],
  footer a[x-apple-data-detectors='true'] {
    color: inherit !important;
    text-decoration: none !important;
    -webkit-tap-highlight-color: transparent !important;
    -webkit-text-size-adjust: none !important;
  }

  .footer-org-info,
  .footer-org-info *,
  .footer-org-info a,
  .footer-org-info span,
  .no-phone-link,
  .no-phone-link * {
    color: inherit !important;
    text-decoration: none !important;
    pointer-events: none !important;
    -webkit-tap-highlight-color: transparent !important;
    -webkit-text-size-adjust: none !important;
  }

  /* Apple data detectors styling - AGGRESSIVE */
  a[x-apple-data-detectors],
  a[x-apple-data-detectors='true'],
  .x-apple-data-detectors,
  .x-apple-data-detectors * {
    color: inherit !important;
    text-decoration: none !important;
    pointer-events: none !important;
  }

  /* For foretag pages - ensure white text */
  .bg-\[\#171717\] .footer-org-info,
  .bg-\[\#171717\] .footer-org-info *,
  .bg-\[\#171717\] .footer-org-info a,
  .bg-\[\#171717\] .no-phone-link {
    color: white !important;
  }

  /* For regular pages - ensure dark text */
  .bg-\[\#F3F1E8\] .footer-org-info,
  .bg-\[\#F3F1E8\] .footer-org-info *,
  .bg-\[\#F3F1E8\] .footer-org-info a,
  .bg-\[\#F3F1E8\] .no-phone-link {
    color: #171717 !important;
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Footer, Över länkar",
  "settings": [
    {
      "type": "header",
      "content": "Styling"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#ffffff"
    }
  ],
  "blocks": [
    {
      "type": "link_column",
      "name": "Länk kolumn",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Titel"
        },
        {
          "type": "text",
          "id": "link_1_text",
          "label": "Länk 1 - Text"
        },
        {
          "type": "url",
          "id": "link_1_url",
          "label": "Länk 1 - URL"
        },
        {
          "type": "text",
          "id": "link_2_text",
          "label": "Länk 2 - Text"
        },
        {
          "type": "url",
          "id": "link_2_url",
          "label": "Länk 2 - URL"
        },
        {
          "type": "text",
          "id": "link_3_text",
          "label": "Länk 3 - Text"
        },
        {
          "type": "url",
          "id": "link_3_url",
          "label": "Länk 3 - URL"
        }
      ]
    },
    {
      "type": "bottom_link_column",
      "name": "Nedre länk kolumn",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Titel"
        },
        {
          "type": "text",
          "id": "link_1_text",
          "label": "Länk 1 - Text"
        },
        {
          "type": "url",
          "id": "link_1_url",
          "label": "Länk 1 - URL"
        },
        {
          "type": "text",
          "id": "link_2_text",
          "label": "Länk 2 - Text"
        },
        {
          "type": "url",
          "id": "link_2_url",
          "label": "Länk 2 - URL"
        },
        {
          "type": "text",
          "id": "link_3_text",
          "label": "Länk 3 - Text"
        },
        {
          "type": "url",
          "id": "link_3_url",
          "label": "Länk 3 - URL"
        },
        {
          "type": "text",
          "id": "link_4_text",
          "label": "Länk 4 - Text"
        },
        {
          "type": "url",
          "id": "link_4_url",
          "label": "Länk 4 - URL"
        }
      ]
    }
  ],
  "max_blocks": 6,
  "presets": [
    {
      "name": "Footer, Över länkar",
      "blocks": [
        { "type": "link_column" },
        { "type": "link_column" },
        { "type": "link_column" },
        { "type": "link_column" },
        { "type": "bottom_link_column" },
        { "type": "bottom_link_column" }
      ]
    }
  ]
}
{% endschema %}
